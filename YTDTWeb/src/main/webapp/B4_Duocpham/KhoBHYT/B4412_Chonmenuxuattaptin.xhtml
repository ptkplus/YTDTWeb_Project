<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:s="http://jboss.com/products/seam/taglib"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:f="http://java.sun.com/jsf/core"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:rich="http://richfaces.org/rich"
                xmlns:a4j="http://richfaces.org/a4j"
                xmlns:c="http://java.sun.com/jstl/core"
                template="/layout/myTemplateWithoutGear.xhtml">

<ui:define name="body">
	<h:form id="_form" name="_form" >		
<script language="javascript">	
	function xuatTapTinValidate(){
		var loaiFile = getValueCheckOrRadioList(document.forms[0].id + ":" + "__dinhdang");
		if(loaiFile == null){
			alert('Loại tập tin cần phải chọn.');
			return false;
		}
	}
</script>
    <table style="margin-top:20px" cellspacing="0" cellpadding="0" border="0" width="777">
    	<tr>
    		<td colspan="3" height="50px">
    			<table cellspacing="0" cellpadding="0" border="0" width="100%" >
    				<tr>
    					<td height="50px" width="100%" style="padding-left: 18px; font-family: Arial; font-size: 18px; color: white; font-weight: bold;" >    			
    						<h:graphicImage value="/images/white_light.gif" width="43" height="16" />
    						SỐ LIỆU TỒN KHO
    					</td>
    					<td valign="top">
    					<table cellspacing="0" cellpadding="0" width="100%" >
    						<tr>
    							<td style="font-family: Arial; font-size: 12px; color: white; text-align: right; padding-right: 15px; padding-bottom: 2px; height: 25px; border-bottom: solid 1px #97989a;" valign="bottom" >
    								
    							</td>
    						</tr>
    					</table> 
    					</td>
    				</tr>
    			</table>			
    		</td>    		    	
    	</tr>    
    	<tr>
    		<td width="13px" height="12px" class="mytdl">    			
    		</td>
    		<td style="background-color: #c9daea;" width="965px" height="12px" >       			   			 		 		 		 	
    		</td>
    		<td width="11px" height="12px" class="mytdr">    			
    		</td>
    	</tr>
    	<tr>
    		<td colspan="3" style="background-color: #c9daea; padding-top: 10px; padding-bottom: 0px" width="100%" >    			
    			    			
    			<table align="center" cellspacing="0" cellpadding="0" border="0" width="98%" >
    				
    				<tr style="height: 25px;" >
    				<td align="right" width="28%">
    						<h:outputText value="Chọn định dạng file cần xuất:" styleClass="mytext_b" style="margin-right: 5px;"/>
    					</td>
    					<td align="left" width="25%">
    						<h:selectOneRadio id="__dinhdang" value="#{B4412_Inbaocaonhapxuatthang.loaiFileXuat}" tabindex="1">
        						<f:selectItem id="__word" itemValue="DOC" itemLabel="Word" styleClass="mycheck"/>
        						<f:selectItem id="__excel" itemValue="EXCEL" itemLabel="Excel" styleClass="mycheck"/>
        						<f:selectItem id="__pdf" itemValue="PDF" itemLabel="Pdf" styleClass="mycheck" itemDisabled="false"/>
        						<f:selectItem id="__xml" itemValue="XML" itemLabel="XML" styleClass="mycheck"/>
    						</h:selectOneRadio>
    					</td>
    					<td align="left" >
    						<div class="mybton_b_l" style="width: 95px; float: left;">
    							<div style="background-position: 80px 0px; float: left; padding-right: 5px" class="mybton_b_r">
    								<h:inputHidden id="__xuatReportHidden" value="#{B4412_Inbaocaonhapxuatthang.isReport}"/>
    								<h:inputHidden id="__fileXuatName" value="#{B4412_Inbaocaonhapxuatthang.resultReportFileName}"/>
    								<h:commandButton tabindex="2" id="__xuattaptin" 
    									action="#{B4412_Inbaocaonhapxuatthang.inPhieu(B4412_Inbaocaonhapxuatthang.loaiFileXuat)}" name="_xuattaptin" value="Xuất Tập Tin" style="width: 80px;" styleClass="mybton_b">
	    							</h:commandButton>
    							</div>
    						</div>
    						<div class="mybton_b_l" style="width: 85px; float: left;">
    							<div style="background-position: 70px 0px; float: left; padding-right: 5px" class="mybton_b_r">
    								<input onclick="_InBaoCao();" tabindex="4" id="__inbaocao" type="button" value="In báo cáo" style="width: 70px;" class="mybton_b"/>
    							</div>
    						</div>
    						
    						<div class="mybton_b_l" style="width: 65px; float: left;">
    							<div style="background-position: 55px 0px; float: left; padding-right: 5px" class="mybton_b_r">
    								<h:commandButton tabindex="3" id="__trove" action="#{B4412_Inbaocaonhapxuatthang.troVe()}" name="_trove" value="Trở Về" style="width: 55px;" styleClass="mybton_b">
	    							</h:commandButton>
    							</div>
    						</div>
    						
    					</td>
    				</tr>  
    				  	<tr>
    				  	<td align="right" width="28%">
    						<h:outputText value="Chọn loại báo cáo:" styleClass="mytext_b" style="margin-right: 5px;"/>
    					</td>
    				  	<td colspan="2">
    				  	<h:selectOneRadio id="__loaibaocao" value="#{B4412_Inbaocaonhapxuatthang.loaiBaoCao}" tabindex="1" onclick="_display(this.value);">
    				  		<f:selectItem id="__no" itemValue="no" itemLabel="Xuất nhập tồn" styleClass="mycheck"/>
        					<f:selectItem id="__pl" itemValue="pl" itemLabel="Xuất nhập tồn theo phân loại" styleClass="mycheck"/>
    				  	</h:selectOneRadio>
    				  	<input type="hidden" value="" id="__fileName" name="__fileName" /> 
    				  	</td>
    				  	
    				  	</tr>			
    			</table>   		    						
    		</td>
    	</tr>	    	
    	<tr id="no" style="display: none;">
    		<td colspan="3" style="background-color: #c9daea; padding-top: 10px; padding-bottom: 15px" width="100%" align="center" >    			    			
    			<c:if test="#{not empty B4412_Inbaocaonhapxuatthang.resultReportName}">
    				<iframe style="width:95%; height:800px" scrolling="auto" id="iframe1" src="#{facesContext.externalContext.requestContextPath}/report/result/dieutri/duocpham/report_Result.jsp?tenBaoCao=#{B4412_Inbaocaonhapxuatthang.resultReportName}" />
    			</c:if>
    		</td>
		</tr>    
		<tr id="pl" style="display: none;">
    		<td colspan="3" style="background-color: #c9daea; padding-top: 10px; padding-bottom: 15px" width="100%" align="center" >    			    			
    			<c:if test="#{not empty B4412_Inbaocaonhapxuatthang.resultReportName_pl}">
    				<iframe style="width:95%; height:800px" scrolling="auto" id="iframe1" src="#{facesContext.externalContext.requestContextPath}/report/result/dieutri/duocpham/report_Result.jsp?tenBaoCao=#{B4412_Inbaocaonhapxuatthang.resultReportName_pl}" />
    			</c:if>
    		</td>
		</tr>    
    	    	
    </table>
    </h:form>
    
<script language="javascript">		
		if(document.getElementById(document.forms[0].id + ":" + "__xuatReportHidden").value == 'true'){
			var fileXuatName = document.getElementById(document.forms[0].id + ":" + "__fileXuatName").value;
			if(fileXuatName != ''){
				var win = window.open(myContextPath+'/report/result/dieutri/duocpham/xuatFile.jsp?tenTapTinBaoCao='+fileXuatName, null, "menubar=1,toolbar=1,scrollbars=1,resizable=1,width=500,height=300");
				win.focus();			
			}			
		}
		function _display(tdname){
			//alert(tdname);
			var td1 = document.getElementById("no").style.display = "none";
			var td2 = document.getElementById("pl").style.display = "none";
			var td = document.getElementById(tdname).style.display = "block";
			document.getElementById("__fileName").value = tdname;
		}
		function _InBaoCao(){
			var td1 = document.getElementById("__fileName");
			
			
			if(td1.value == "no"){
				iesvn_WindowOpen('#{facesContext.externalContext.requestContextPath}/report/result/dieutri/duocpham/printReport.jsp?filePrint=#{B4412_Inbaocaonhapxuatthang.resultReportName}',1000,700);
			}
			else if(td1.value == "pl"){
				iesvn_WindowOpen('#{facesContext.externalContext.requestContextPath}/report/result/dieutri/duocpham/printReport.jsp?filePrint=#{B4412_Inbaocaonhapxuatthang.resultReportName_pl}',1000,700);
			}
		}
</script>

</ui:define> 
</ui:composition>


