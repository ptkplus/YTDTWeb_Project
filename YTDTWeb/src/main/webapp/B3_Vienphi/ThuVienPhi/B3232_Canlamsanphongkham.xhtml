<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:s="http://jboss.com/products/seam/taglib"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:f="http://java.sun.com/jsf/core"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:a4j="https://ajax4jsf.dev.java.net/ajax"
                xmlns:rich="http://richfaces.org/rich"
                xmlns:c="http://java.sun.com/jstl/core" 
                
                template="/layout/mytemplate.xhtml">

<ui:define name="body">	

	<f:loadBundle var="msg" basename="com.iesvn.yte.UIResources" />

	<script type="text/javascript">
    	var statusEnterAnhTabForChon;
    	function enterToTab(){
		
		  		  if(	(document.getElementById(prefix_component + "__nhaplai") == null || document.getElementById(prefix_component + "__nhaplai").alt != 1 ) &amp;&amp; 
		          	 	(document.getElementById(prefix_component + "__inphieu") ==null || document.getElementById(prefix_component + "__inphieu").alt != 1 ) &amp;&amp; 
		           		(document.getElementById(prefix_component + "__themchinhsau") ==null || document.getElementById(prefix_component + "__themchinhsau").alt != 1 ) &amp;&amp; 
		           		(document.getElementById(prefix_component + "__timkiem") ==null || document.getElementById(prefix_component + "__timkiem").alt != 1 ) &amp;&amp; 
		           		
		           		(document.getElementById(prefix_component + "__ghinhan") == null ||document.getElementById(prefix_component + "__ghinhan").alt  != 1  )  &amp;&amp; 
		           		//(document.getElementById(prefix_component + "__thuoc") == null ||document.getElementById(prefix_component + "__thuoc").alt  != 1  )  &amp;&amp; 
		           		//(document.getElementById(prefix_component + "__thuocBHYT") == null ||document.getElementById(prefix_component + "__thuocBHYT").alt  != 1 )   &amp;&amp; 
		           		
		           		statusEnterAnhTabForChon != 1
		           		
		           ) {
		           
		                  if(window.event.keyCode == 13){
		                         window.event.keyCode = 9;
		                   }
		           }
		}
		var bCancel = false;
		var bSave = false;
		
		var validateCT = false;
		
		function setSave() {
			bSave = true;
		}
		function setCancel(){
			bCancel = true;
		}		
		
		function iesvn_Required() {
			this.aa = new Array(prefix_component + "__ngay", "<h:outputFormat value='#{msg.common_requireField}' > <f:param value='Ngày'/> </h:outputFormat>", new Function ("varName",  "return this[varName];"));
 	 		this.ab = new Array(prefix_component + "__matiepdon", "<h:outputFormat value='#{msg.common_requireField}' > <f:param value='Mã tiếp đón'/> </h:outputFormat>", new Function ("varName",  "return this[varName];"));
			//this.ac = new Array(prefix_component + "DT_DM_NHAN_VIEN_MA_1", "<h:outputFormat value='#{msg.common_requireField}' > <f:param value='Thu ngân'/> </h:outputFormat>", new Function ("varName",  "return this[varName];"));
		}
		function checkEmpty(id){
			if ( document.getElementById(id).value == null || document.getElementById(id).value == "" ){
			
				if(document.getElementById(id).className.match(/focus/gi))
              		document.getElementById(id).className = document.getElementById(id).className.replace(/focus/gi,"");
				return false;
			}
			return true;
		}
		
		//function iesvn_FloatValidations(){
			//this.aa = new Array(prefix_component + "__soluong", 
				//				"<h:outputFormat value='#{msg.common_float}'><f:param value='Số lượng' /></h:outputFormat>", 
					//			new Function ("varName",  "return this[varName];"));
		//}
		
		function iesvn_IntegerValidations(){
		    //this.aa = new Array(prefix_component + "__soluong", "<h:outputFormat value='#{msg.common_int}' ><f:param value='Số lượng'/></h:outputFormat>", new Function ("varName", " return this[varName];"));
		    
		}
		
		function onSubmitTmp(){
			setSave() ;
			//var maPhieuTT =  document.getElementById(prefix_component + "__maphieu").value;
			//var resultHidden = document.getElementById(prefix_component + "resultHidden").value;

			//if (maPhieuTT != null &amp;&amp; maPhieuTT != "" &amp;&amp; resultHidden != "success"){
			//  alert("Không được phép chỉnh sửa phiếu.");
			//  return false;
			//}
			return onSubmit();
		}
		
		function clear(){
			//document.getElementById('__benhnhanduoctiepdon').value = '';
			//document.getElementById('DT_DM_CLS_BANG_GIA').value = '';
			//document.getElementById('DM_KHOA').value = '';
			//document.getElementById(prefix_component + 'donGiaHid').value = '';
			//document.getElementById('DM_TINH').value = '';
			//document.getElementById('DM_HUYEN').value = '';
			//document.getElementById('DM_XA').value = '';
			
			//document.getElementById('DM_DOI_TUONG').value = '';
			//document.getElementById('DM_DAN_TOC').value = '';
		}
		
		function onSubmit() {
			//changeCursorWait ();
			var form = document.forms[0];
			var valid = true;			
			if (bSave){
		    	bSave = false;	    	    	
		    	valid = iesvn_ValidateRequired(form)  ;     	
		    } 	    
		    if (valid == true){	
		        valid = iesvn_ValidateInteger(form)  ;     	
		    }	    
		    if (bCancel){
		    	bCancel = false;
		    }
		    if (valid == false){
	    		changeCursorDefault ();
	    	}
		    return valid;
			
		}
		
		function myValidateDate(myThis){
		  var validatedate =  is_wellformed_Date(myThis);  
		  //alert("validatedate:"+validatedate);
		  //if ( validatedate == true){
		     //getListBenhNhanTiepDon();
		  //   return true;
		  //}else{
		     return false;
		  //}
		} 
		 function checkValidValue(textbox) {
			 var conlai = document.getElementById(prefix_component + "__bhytchi").value;			 
			 var value = textbox.value;
			 if (value != '') {
				 if (parseInt(value.replace(/,/g,""),10) &gt; parseInt(conlai.replace(/,/g,""),10)) {
					 textbox.value = parseInt(conlai.replace(/,/g,""),10);
					 textbox.focus();
				 }
			 } else {
				 textbox.value = 0;
			 }			      			 			 
		 }
		 function addCommas(nStr){
		 	nStr += '';
		 	x = nStr.split('.');
		 	x1 = x[0];
		 	x2 = x.length > 1 ? '.' + x[1] : '';
		 	var rgx = /(\d+)(\d{3})/;
		 	while (rgx.test(x1)) {
		 		x1 = x1.replace(rgx, '$1' + ',' + '$2');
		 	}
		 	return x1 + x2;
		 }
		 		 
		 function tinhSoTienKyNay(checkbox,soluong, dongia) {			 
			 var strSotien = document.getElementById(prefix_component + "__bntrakn").value;			 			
			 var sotienkn = parseInt(strSotien.replace(/,/g, ""),10);
			 if (checkbox.checked) {
				 document.getElementById(prefix_component + "__bntrakn").value = addCommas("" + (sotienkn + (parseInt(soluong,10) * parseInt(dongia,10))));
			 } else {
				 document.getElementById(prefix_component + "__bntrakn").value = addCommas("" + (sotienkn - (parseInt(soluong,10) * parseInt(dongia,10))));
			 }
		 }
		 function checkCheckboxes(){
			 
		    var elLength = document.forms[0].elements.length;
            
		    for (i=0; i &lt; elLength; i++){
		        var type = document.forms[0].elements[i].type;		        
		        if (type=="checkbox"){
		        	if(!document.forms[0].elements[i].checked) {
		        		document.forms[0].elements[i].checked = true;
		        	}
		        }
		        
		    }
		}
	</script>
	<body onkeydown="enterToTab();">
	<h:form id="_form" name="_form" onsubmit="return onSubmit();">
	<h:inputHidden id="goToCLSPhongKham" value="#{goToCLSPhongKham}"/>
	<div style="width:778px; position:absolute; z-index:99">
	
	<c:if test="#{tenChuongTrinh.equals(YTDT_Menu.quanLyKhoBHYT)}">
		<ui:include src="/layout/mymenu_YTDT_DuocPham_KhoBHYT.xhtml" />
	</c:if>
	<c:if test="#{tenChuongTrinh.equals(YTDT_Menu.thuVienPhi)}">
		<ui:include src="/layout/mymenu_YTDT_VienPhi_ThuVienPhi.xhtml" />
	</c:if>
	
	</div>
    
    
    <table style="margin-top:20px" cellspacing="0" cellpadding="0" border="0" width="777">
    	<tr>
    		<td colspan="3" height="50px">
    			<table cellspacing="0" cellpadding="0" border="0" width="100%" >
    				<tr>
    					<td height="50px" width="50%" style="padding-left: 18px; font-family: Arial; font-size: 18px; color: white; font-weight: bold;" >    			
    						<h:graphicImage value="/images/white_light.gif" width="43" height="16" />
    						THANH TOÁN BỆNH NHÂN THU PHÍ
    					</td>
    					<td valign="top">
    					<table cellspacing="0" cellpadding="0" width="100%" >
    						<tr>
    							<td style="font-family: Arial; font-size: 12px; color: white; text-align: right; padding-right: 10px; padding-bottom: 2px; height: 25px; border-bottom: solid 1px #97989a;" valign="bottom" >
    								&#160;
    							</td>
    						</tr>
    					</table> 
    					</td>
    				</tr>
    			</table>			
    		</td>    		    	
    	</tr>    
    	<tr>
    		<td width="13px" height="12px" class="mytdl">    			
    		</td>
    		<td style="background-color: #c9daea;" width="965px" height="12px" >       			   			 		 		 		 	
    		</td>
    		<td width="11px" height="12px" class="mytdr">    			
    		</td>
    	</tr>
    			<tr style=" height : 5px;">
    		<td width="100%" style="background-color: #c9daea; padding-top: 0px; padding-bottom: 0px" colspan="3" align="center">  
    		      	<a4j:outputPanel id="message_infor">
       					 <h:messages	styleClass="mynull"/>
					</a4j:outputPanel>
    		</td>    		
    	</tr>
    	<tr>
    		<td colspan="3" style="background-color: #c9daea; padding-top: 0px; padding-bottom: 10px" width="100%" >
    			<!-- Main Area -->
    			<table cellspacing="0" cellpadding="0" border="0" width="99%" align="center">
    				<tr style="height: 25px;">
    				<td align="right" width= "13%">
    				
    				<h:outputText value="Mã phiếu" styleClass="mytext" style="margin-left: 5px; margin-right: 5px"/>
    				</td>
    				<td >
    				<h:inputText onkeypress="iesvn_InputInKeys('1234567890');" maxlength="15" tabindex="1"
    					value="#{B3232_Canlamsanphongkham.maPhieuTT}"  id="__maphieu" name="_maphieu" style=" width : 140px;" styleClass="myinput">
    					<a4j:support event="onblur" 
    						action="#{B3232_Canlamsanphongkham.displayInforMaPhieu}"
    						onsubmit="if (! checkEmpty(prefix_component + '__maphieu')) { return false; } " 
    						reRender="DT_DM_NHAN_VIEN__1,__maphieu,DM_DAN_TOC,__thuocvtth,__cls,__donViTuoiHid,__namsinhHid,__tendoituong,__tenbankham,__kyhieu,__quyen,__bienlai,dataTable_NHAPCT,__listClsPK,listKetqua,DT_DM_NHAN_VIEN_MA_1,message_infor,__matiepdon,__hoten,__ngaysinh,__gioitinh,TINH_MA,HUYEN_MA,XA_MA,__madoituong,__sonha,__madantoc,__mabacsi,__noidungthu,__makhoa,__permiengiam,__miengiam,__thatthu,__perbhytchi,__bhytchi,__thanhtien1,__perbntra,__bntra,__tuoi,__gio,resultHidden,__bntrakn,disabledHuyPhieu"
    						oncomplete="onCompleteGetInfor();highlightOnFocus();changeCursorDefault();"/>
    				</h:inputText>
    				&#160;
    						
    				<h:outputText value="Ngày" styleClass="mytext" style="margin-right: 5px; margin-left: 5px;"/>
    					<h:inputText maxlength="5"  onkeypress="iesvn_InputInKeys('1234567890:');" 
		    					value="#{B3232_Canlamsanphongkham.gioThanhToan}" tabindex="2" id="__gio" name="_gio" 
		    					style="width: 35px;margin-right:3px;" styleClass="myinput"  onkeyup="checkHour(this);" 
		    					onblur='if(this.className.match(/focus/gi))    this.className = this.className.replace(/focus/gi,""); checkHourBlur(this)'/>
	    				<h:inputText value="#{B3232_Canlamsanphongkham.ngayTt}" onkeypress="return being_wellformed_Date(this, event)" 
	    				onblur='if(this.className.match(/focus/gi))    this.className = this.className.replace(/focus/gi,""); return myValidateDate(this);'
	    					 type="text" id="__ngay" name="_ngay" maxlength="10" style=" width : 70px;" class="myinput"/><a href="javascript:void(0)" onclick="if(self.gfPop)gfPop.fPopCalendar(document.getElementById(prefix_component + '__ngay'));return false;" ><h:graphicImage value="/resources/calendar/cal.gif" style="margin:0 0 -3px 0" border="0" name="popcal"/></a>		
	    			<h:outputText value="*" styleClass="mynull" style="margin-right: 5px; margin-left: 0px;"/>
	    				
	    				
    			<h:outputText value="Thu ngân" styleClass="mytext" style="margin-right: 5px; margin-left: 10px;"/>
    					
    					 <h:inputText readonly="true"  value="#{B3232_Canlamsanphongkham.nhanVienThungan.dtdmnhanvienTen}" id="DT_DM_NHAN_VIEN__1"  style="width: 230px;" styleClass="myreadonly" onkeydown="return disabledBackSpace();" />
	    				 </td>
	    				 </tr>
	    				 <tr style="height: 25px;">
    				<td align="right" >
    				<h:outputText value="Mã tiếp đón" styleClass="mytext" style="margin-right: 5px; margin-left: 0px;"/>
    				
    				</td>
    				<td align="left" >
    					<h:inputText onkeypress="iesvn_InputInKeys('1234567890');" maxlength="17" tabindex="3" 
    					value="#{B3232_Canlamsanphongkham.thamKham.tiepdonMa.tiepdonMa}" id="__matiepdon" name="_matiepdon" style=" width : 140px;" styleClass="myinput">
    						<a4j:support oncomplete="onCompleteGetInfor();highlightOnFocus();changeCursorDefault(); checkCheckboxes(); this.alt = 0;"  event="onblur"
    						action="#{B3232_Canlamsanphongkham.displayInfor}" 
    						onsubmit="if (! checkEmpty(prefix_component + '__matiepdon')) { return false; } "
    						reRender="__maphieu,DM_DAN_TOC,__thuocvtth,__cls,__donViTuoiHid,__namsinhHid,__tendoituong,__tenbankham,__kyhieu,__quyen,__bienlai,dataTable_NHAPCT,__listClsPK,listKetqua,DT_DM_NHAN_VIEN_MA_1,message_infor,__matiepdon,__hoten,__ngaysinh,__gioitinh,TINH_MA,HUYEN_MA,XA_MA,__madoituong,__sonha,__madantoc,__mabacsi,__noidungthu,__makhoa,__permiengiam,__miengiam,__thatthu,__perbhytchi,__bhytchi,__thanhtien1,__perbntra,__bntra,__tuoi,resultHidden,__bntrakn"/>
    					</h:inputText>
    					<h:outputText value="*" styleClass="mynull" style="margin-right: 5px; margin-left: 2px;"/>
    					
    					<button name="_goiBN" id="__goiBN" value="Gọi BN" onclick="goiBN('__matiepdon', '__hoten');" type="button">Gọi BN</button>
    						<applet code="com.iesvn.test.testapplet.ClientQuangBaoApplet.class" archive="ClientQuangBao.jar"
width="1" height="1" id="xyz" name="xyz"></applet>
	    					
    				</td>
    			</tr>
    			<tr style="height: 25px;">
    				<td align="right">
    					<h:outputText value="Họ tên" styleClass="mytext" style="margin-right: 5px; margin-left: 5px;"/>
    				</td>
    				<td align="left">
    					<table cellspacing="0" cellpadding="0" border="0" width="100%">
	    					<tr>
	    					<td align="left" width="15%">
	    						<h:inputText disabled="true"  value="#{B3232_Canlamsanphongkham.benhNhan.benhnhanHoten}" id="__hoten" name="_hoten" style="float: left; width : 140px;" styleClass="myreadonly"/>
	    					</td>
	    					<td align="left" width="30%">
	    						<h:outputText value="Giới tính" styleClass="mytext" style="float: left; padding-top:3px; margin-left: 15px; margin-right: 0px;"/>
	    						<h:selectOneRadio disabled="true" value="#{B3232_Canlamsanphongkham.gioi}" id="__gioitinh">
						        	<f:selectItem id="__namItems" itemValue="r1" itemLabel="Nam" styleClass="mycheck"   />					    
						        	<f:selectItem id="__nuItems" itemValue="r2" itemLabel="Nữ" styleClass="mycheck" />
						    	</h:selectOneRadio>
	    					</td>
	    					<td align="left">
		    					<h:outputText value="Tuổi" styleClass="mytext" style=" margin-left: 56px; margin-right: 4px;"/>
	    						<h:inputText disabled="true"  value="#{B3232_Canlamsanphongkham.benhNhan.benhnhanTuoi}" id="__tuoi" name="_tuoi" style="margin-left: 0px; margin-right: 3px; width : 60px;" styleClass="myreadonly"/>
	    						
	    						<h:outputText value="năm" id="__donViTuoi" styleClass="mytext" style="margin-left: 5px;margin-right: 3px;"/> 		
	    						<h:inputHidden id = "__donViTuoiHid" value = "#{B3232_Canlamsanphongkham.benhNhan.benhnhanDonvituoi}"/>
	    						
	    						
	    						<h:inputHidden id = "__namsinhHid" value= "#{B3232_Canlamsanphongkham.benhNhan.benhnhanNamsinh}"/>
	    				
	    				
	    						<h:inputText disabled="true" value="#{B3232_Canlamsanphongkham.ngaySinh}" onkeypress="return being_wellformed_Date(this, event)" onblur="return is_wellformed_Date(this.value)" type="text" id="__ngaysinh" name="_ngaysinh" maxlength="10" style=" width : 70px;" styleClass="myreadonly"/>	
	    					</td>
	    				</tr>
	    			</table></td>
    			</tr>
    			<tr style="height: 25px;">
    				<td align="right">
    					<h:outputText value="Địa chỉ" styleClass="mytext" style="margin-right: 5px; margin-left: 5px;"/>
    				</td>
    				<td align="left">
    					<h:inputText  disabled="true" value="#{B3232_Canlamsanphongkham.benhNhan.tinhMa.dmtinhMa}" id="TINH_MA" name="_TINH_MA" style=" width : 30px" styleClass="myreadonly"  maxlength="10" />
    					<span id="DM_TINH_span"/>
    					<input disabled="disabled" id="DM_TINH" name="DM_TINH" class="myreadonly" style="width: 150px;margin-right:3px;"/>
    					<h:inputText disabled="true" value="#{B3232_Canlamsanphongkham.benhNhan.huyenMa.dmhuyenMa}" id="HUYEN_MA" name="_HUYEN_MA" style=" width : 43px" styleClass="myreadonly" onblur="myOnblurTextboxJSF_Huyen_Xa(this.id,'DM_HUYEN', 'TINH_MA')" maxlength="10"/>
    					<span id="DM_HUYEN_span"/>
    					<input disabled="disabled" class="myreadonly" id="DM_HUYEN" name="DM_HUYEN"  style="width: 160px;"/>
    						
    					 	
    					<!-- from -->
    										
    					<h:inputText  disabled="true" value="#{B3232_Canlamsanphongkham.benhNhan.xaMa.dmxaMa}" id="XA_MA" name="_XA_MA" style=" width : 60px" styleClass="myreadonly" onblur="myOnblurTextboxJSF_Huyen_Xa(this.id, 'DM_XA', 'HUYEN_MA')" maxlength="10" />
    					 <span id="DM_XA_span"/>
    					 <input disabled="disabled" id="DM_XA" name="DM_XA" class="myreadonly" style="width: 170px;"/>
    					 	
    						
    						<!-- to-->
    					 	
    				</td>
    			</tr>
    			<tr style="height: 25px;">
    				<td align="right">
    					<h:outputText value="Số nhà, đường" styleClass="mytext" style="margin-right: 5px; margin-left: 5px;"/>
    				</td>
    				<td align="left">

    					<h:inputText readonly="true"  value="#{B3232_Canlamsanphongkham.benhNhan.benhnhanDiachi}" id="__sonha" name="_sonha" style=" width :400px;" styleClass="myreadonly" />
    					<h:outputText value="Dân tộc" styleClass="mytext" style="margin-right: 5px; margin-left: 23px;"/>
    					
    					<h:inputText disabled="true" value="#{B3232_Canlamsanphongkham.benhNhan.getDantocMa(true).dmdantocMa}" 
    						id="__madantoc" name="_madantoc" style=" width : 30px;" styleClass="myreadonly"
    						 maxlength="10" />
    					    					
    					<h:inputText disabled="true" id="DM_DAN_TOC" value="#{B3232_Canlamsanphongkham.benhNhan.getDantocMa(true).dmdantocTen}"
    					class="myreadonly" name="DM_DAN_TOC"  style="margin-left:3px;width: 135px;"/>
    					
    						

    				</td>
    				</tr>
    				<tr style="height: 25px;">
    				<td align="right">
    					<h:outputText value="Đối tượng" styleClass="mytext" style="margin-right: 5px; margin-left: 5px;"/>
    				</td>
    				<td align="left">
    				
    					<!-- 
    					<h:inputText disabled="true" value="#{B3232_Canlamsanphongkham.thamKham.tiepdonMa.doituongMa.dmdoituongMa}" 
    						id="__madoituong" name="__madoituong" style=" width : 30px" styleClass="myreadonly"
    						onblur="myOnblurTextbox(this.id, 'DM_DOI_TUONG')" maxlength="10" />
    					<span id="DT_DM_DOI_TUONG_span"/>

    					<input disabled="disabled" id="DM_DOI_TUONG" name="DM_DOI_TUONG" class="myreadonly" style="width: 150px;"/>
    					 -->
    					 
    					<h:inputText  disabled="true" value="#{B3232_Canlamsanphongkham.thamKham.tiepdonMa.doituongMa.dmdoituongMa}" 
    						id="__madoituong" name="__madoituong" style="width: 50px;margin-right:3px;" styleClass="myreadonly" />
    					<h:inputText  disabled="true" value="#{B3232_Canlamsanphongkham.thamKham.tiepdonMa.doituongMa.dmdoituongTen}" 
    						id="__tendoituong" name="_tendoituong" style="width : 208px;" styleClass="myreadonly" />
    					<h:outputText value="Bàn khám" styleClass="mytext" style="margin-right: 5px; margin-left: 146px;"/>	    					
    					<h:inputText  disabled="true" value="#{B3232_Canlamsanphongkham.strBankham}" 
    						id="__tenbankham" name="_tenbankham" style="width : 170px;" styleClass="myreadonly" />	
    				</td>
    				</tr>
    				<tr style="height: 25px;">
    				<td align="right">
    				<h:outputText value="Bác sĩ" styleClass="mytext" style="margin-right: 5px; margin-left: 0px;"/>
    							
    				</td>
    				<td align="left">
    					<h:inputText disabled="true" value="#{B3232_Canlamsanphongkham.clskham.clskhamMabs.dtdmnhanvienMa}" 
    						id="__mabacsi" name="_mabacsi" style=" width : 50px" styleClass="myreadonly"
    						onblur="myOnblurTextbox(this.id,'DT_DM_NHAN_VIEN__2')" maxlength="10" />    					
    					<input disabled="disabled" id="DT_DM_NHAN_VIEN__2" class="myreadonly" name="DT_DM_NHAN_VIEN"  style="width: 207px;"/>    					
		    			<span id="DT_DM_NHAN_VIEN_span2"/>
		    			
    				</td>
    			</tr>
    			<tr style="height: 25px;">
    				<td align="right">
    				<h:outputText value="Nội dung thu" styleClass="mytext" style="margin-right: 5px; margin-left: 0px;"/>
    							
    				</td>
    				<td align="left">
    					<h:inputText   value="#{B3232_Canlamsanphongkham.noiDungThu}" id="__noidungthu" name="__noidungthu" style=" width :400px;" styleClass="myinput" />
    					
    				</td>
    				</tr>
    				
    				<tr>
    		<td colspan="3" style="background-color: white; padding-top: 10px; padding-bottom: 10px;" width="100%" align="center">
	    	  <table cellspacing="0" cellpadding="0" border="0" width="98%" style="border: solid 1px #7a9dba">
    	  		<tr style=" height : 20px;" class="mycol">
    					<td align="center" style="width: 5%; border-right: solid 1px; border-color:#ffffff;">
    						<h:outputText value="STT"/>
    					</td>    					   					
    					
    					<td align="center" style="width: 5%; border-right: solid 1px; border-color:#ffffff;">
    						 <h:outputText value="Loại"/>
    					</td>
    					
    					<td align="center" style="width :7%; border-right: solid 1px; border-color:#ffffff;">
    						 <h:outputText value="Mã số"/>
    					</td>
    					
    					<td align="center" style="border-right: solid 1px; border-color:#ffffff;">
    						<h:outputText value="Tên CLS, PT, TT"/>
    					</td>
    					<td align="center" style="width: 10%; border-right: solid 1px; border-color:#ffffff;">
    						<h:outputText value="Khoa CLS"/>
    					</td>
    					<td align="center" style="width: 5%; border-right: solid 1px; border-color:#ffffff;">
    						 <h:outputText value="MP"/>
    					</td>
    					<td align="center" style="width: 5%; border-right: solid 1px; border-color:#ffffff;">
    						<h:outputText value="YC"/>
    					</td>
    					<td align="center" style="width: 5%;  border-right: solid 1px; border-color:#ffffff;">
    						<h:outputText value="KTC"/>
    					</td>
    					<td align="center" style="width: 5%; border-right: solid 1px; border-color:#ffffff;">
    						<h:outputText value="SL"/>
    					</td>
    					<td align="center" style="width: 5%; border-right: solid 1px; border-color:#ffffff;">
    						<h:outputText value="Trả"/>
    					</td>
    					<td align="center" style="width:12%; border-right: solid 1px; border-color:#ffffff;">
    						<h:outputText value="Đơn giá"/>
    					</td> 
    					<td align="left" style="width:6%; padding-left:7px;">
    						<h:outputText value="TT"/>
    					</td>      					 						    								
   				</tr>
    	  		<tr>
					<td colspan="12">
    			<div style="overflow-x: hidden;overflow-y: scroll; height: 130px;width: 100%;" id="listKetqua">
    					<rich:dataTable headerClass="mycol" id="dataTable_NHAPCT" rowClasses="myrow1,myrow2"
	                          styleClass="myTable" value="#{listCtkq}" var="currentRow" width="100%" rendered="#{listCtkq.rowCount>=0}" bgcolor="#cccccc">
	                        <rich:column style="width: 5%;" id="column_STT" >	                        	
	                            <h:outputText id="outputText26" value="#{listCtkq.rowIndex + 1}"/>                 
	                        </rich:column>
	                        <rich:column id="column_loai" style="width: 5%;">	                        	
                                <h:outputText id="loai_table" value="#{currentRow.clskhamLoai}" />
	                        </rich:column>
	                        <rich:column id="column_maso" style="width: 7%;">  	                                                                         
	                             <h:outputText id="maso_table" value="#{currentRow.clskhamMahang.dtdmclsbgMa}" />          
	                        </rich:column>
	                        <rich:column id="column_diengiai" style="text-align:left">  	                        	
                                <h:outputText id="diengiai_table" value="#{currentRow.clskhamMahang.dtdmclsbgDiengiai}" />              	                                  
	                        </rich:column>
	                        <rich:column id="column_khoacls" style="width: 10%;">  	                        	                                                
	                             <h:outputText id="khoacls_table" value="#{currentRow.clskhamKhoa.dmkhoaMa}" />          
	                        </rich:column>
	                        <rich:column id="column_mp" style="width: 5%;">  	                        	                                                 
	                             <h:outputText id="mp_table" value="#{currentRow.clskhamMien==true?'x':''}" />          
	                        </rich:column>	                       
	                        <rich:column id="column_yc" style="width: 5%;">   	                        	                                                  
	                             <h:outputText id="yc_table" value="#{currentRow.clskhamYeucau==true?'x':''}" />          
	                        </rich:column>
	                        <rich:column id="column_ktc" style="width: 5%;">   	                        	                                                 
	                             <h:outputText id="ktc_table" value="#{currentRow.clskhamKtcao== true?'x':''}" />          
	                        </rich:column>
	                        <rich:column id="column_soluong" style="width: 5%;">  	                        	                                                 
	                             <h:outputText id="soluong_table" value="#{currentRow.clskhamLan}" ><f:converter converterId="com.iesvn.yte.converter.LongDoubleConverter" /></h:outputText>          
	                        </rich:column>
	                        <rich:column id="column_tra" style="width: 5%;">  	                        	                                                 
	                             <h:outputText id="tra_table" value="#{currentRow.clskhamTra}" ><f:converter converterId="com.iesvn.yte.converter.LongDoubleConverter" /></h:outputText>          
	                        </rich:column>
	                        <rich:column id="column_dongia" style="width: 12%; text-align:right">  	                        	                                                
	                             <h:outputText id="dongia_table" value="#{currentRow.clskhamDongia}" ><f:converter converterId="com.iesvn.yte.converter.LongDoubleConverter" /></h:outputText>          
	                        </rich:column>	                        
	                         <rich:column id="column_thanhtoan" style="width: 6%;">  	                        	                                                
	                            <h:selectBooleanCheckbox  disabled="#{currentRow.clskhamDatt}" title="Thanh Toán" label="Thanh Toán" id="__thanhtoan_#{listCtkq.rowIndex}"  value="#{currentRow.clskhamDatt}" style="float: left" onclick="tinhSoTienKyNay(this,#{currentRow.clskhamLan},#{currentRow.clskhamDongia})">
       						    </h:selectBooleanCheckbox>   	 						      	 					
	                        </rich:column>
	                        
	                    </rich:dataTable>
    				</div>
    				</td></tr> 	
    				
    			</table> 			
    		</td>
    	</tr>
    	<tr>
			<td colspan="3" style="background-color: #ffffff; padding-top: 10px; padding-bottom: 5px;" width="100%" align="center">
    			
    			
    			<table cellspacing="0" cellpadding="0" width="98%" style="border: solid 1px #7e9dba">
    			 <tr style="height: 20px;" class="mycol">
    			<td align="center" style="width: 5%; border-right: solid 1px; #ffffff;" >
    			<h:outputText value="STT"/>
    					
    			</td>
    			<td align="center" style="width: 10%; border-right: solid 1px; #ffffff;">
    			<h:outputText value="Mã số"/>
    			</td>
    			<td align="center" style="border-right: solid 1px; #ffffff;">
    			<h:outputText value="Tên thuốc, quy cách"/>
    			</td>
    			<td align="center" style="width: 7%; border-right: solid 1px; #ffffff;">
    			<h:outputText value="NSX"/>
    					
    			</td>
    			<td align="center" style="width: 18%; border-right: solid 1px; #ffffff;">
    			<h:outputText value="HSX"/>
    							
    			</td>
    			<td align="center" style="width: 8%; border-right: solid 1px; #ffffff;">
    			<h:outputText value="Số lượng"/>
    								
    			</td>
    			<td align="center" style="width: 12%; border-right: solid 1px; #ffffff;">
    			<h:outputText value="Đơn giá"/>
    									
    			</td>
    			
    			<td align="center" style="width: 13%; border-right: solid 1px; #ffffff;">
    				<h:outputText value="Thành tiền" />    								
    			</td>
    			<td align="left" style="width:6%;padding-left:7px;">
					<h:outputText value="TT"/>
				</td>    
    			</tr>
    			
    			<tr>
    			<td colspan="9">
    			<div style="overflow-x: hidden; overflow-y: scroll; height: 130px;  width: 100%">
    			<h:panelGroup id="listCtXuatBh">
    			<rich:dataTable id="__listClsPK"  width="100%" value="#{ctClsPhongKhams}" var="thuocPK" align="center" border="0" cellpadding="0" cellspacing="0"
    				headerClass="mycol" rowClasses="myrow1,myrow2" bgcolor="#cccccc" >
    				<rich:column width="5%" align="center" >    					
    					<h:outputText value="#{ctClsPhongKhams.rowIndex + 1}" style="padding-left: 3px;" />
    				</rich:column>
    				<rich:column width="10%" align="center" >    						
    					<h:outputText value="#{thuocPK.thuocphongkhamMathuoc.dmthuocMa}" style="padding-left: 3px;" />				
    				</rich:column>
    				<rich:column align="left" >    					
    					<h:outputText value="#{thuocPK.thuocphongkhamMathuoc.dmthuocTen}" style="padding-left: 3px;" />
    				</rich:column>
    				<rich:column width="7%" align="center" >    					
    					<h:outputText value="#{thuocPK.getThuocphongkhamQuocgia(true).dmquocgiaMa}" style="padding-left: 3px;" />
    				</rich:column>
    				<rich:column width="18%" align="left" >    					
    					<h:outputText value="#{thuocPK.getThuocphongkhamHangsx(true).dmnhasanxuatTen}" style="padding-left: 3px;" />
    				</rich:column>
    				<rich:column width="8%" align="center" >    					
    					<h:outputText value="#{thuocPK.thuocphongkhamSoluong}" style="padding-left: 3px;" >
    					<f:converter converterId="com.iesvn.yte.converter.DoubleConverter2FractionDigits" />
    					</h:outputText>
    				</rich:column>
    				<rich:column width="12%" align="right" >    					
    					<h:outputText value="#{thuocPK.thuocphongkhamDongiatt}" style="padding-left: 3px;" >    						
    					</h:outputText>
    				</rich:column>
    				<rich:column width="13%" align="right" style="padding-right:3px;" >    					
    					<h:outputText value="#{thuocPK.thuocphongkhamThanhtien}" style="padding-left: 3px;" >    						
    					</h:outputText>
    				</rich:column>
    				
    				<rich:column id="column_thanhtoan" style="width: 6%;">  	                        	                                                
                        <h:selectBooleanCheckbox  disabled="true" title="Thanh Toán" label="Thanh Toán" id="__thanhtoan_#{ctClsPhongKhams.rowIndex}"  value="#{thuocPK.thuocphongkhamDatt}" style="float: left">
  						    </h:selectBooleanCheckbox>   	 						      	 					
                    </rich:column>
    				 
    			</rich:dataTable>  
    			</h:panelGroup>
    			</div> 
    			</td>
    			</tr>
    			</table> 			
    		
    		</td>
    				</tr>
    				<tr style="height: 10px;">
    				<td>
    				</td>
    				</tr>		
    			<tr style="height: 20px;">
    					<td align="right" width="99px">
    					<h:outputText value="Tổng cộng" styleClass="mytext" style="margin-right: 5px; margin-left: 5px;"/>
    					
    						
    					</td>
    					<td align="left" style="padding-right: 15px;">
    					<h:inputText  readonly="true"  value="#{B3232_Canlamsanphongkham.thanhtien1}" id="__thanhtien1"  name="_thanhtien1" style=" width : 100px;" styleClass="myreadonlyso"><f:converter converterId="com.iesvn.yte.converter.LongDoubleConverter" /></h:inputText>
    					<h:outputText value="BN trả" styleClass="mytext" style="margin-right: 5px; margin-left:42px;"/>
    					<h:inputText  readonly="true"   value="#{B3232_Canlamsanphongkham.bntra}" id="__bntra"  name="_bntra" style="width: 100px" styleClass="myreadonlyso"><f:converter converterId="com.iesvn.yte.converter.LongDoubleConverter" /></h:inputText>
    					
    					
    						<h:outputText value="Còn lại" styleClass="mytext_b" style="margin-right: 5px; margin-left: 13px;"/>
    						<h:inputText  readonly="true"  value="#{B3232_Canlamsanphongkham.conlai}" id="__bhytchi" name="_bhytchi" style=" width : 100px;" styleClass="myreadonlyso"><f:converter converterId="com.iesvn.yte.converter.LongDoubleConverter" /></h:inputText>
    						
    						<h:outputText value="BN trả kỳ này" styleClass="mytext" style="margin-right: 5px; margin-left: 12px;"/>
    						<h:inputText  readonly="true"  value="#{B3232_Canlamsanphongkham.bntrakn}" id="__bntrakn" name="_bntrakn" style=" width : 100px;" styleClass="myreadonlyso"><f:converter converterId="com.iesvn.yte.converter.LongDoubleConverter" /></h:inputText>
    					</td>    					
    				</tr>
    				<tr style="height: 20px;">
    					<td align="right" >
    					
    							<h:outputText value="CLS" styleClass="mytext" style="margin-right: 5px; margin-left: 48px;"/>
    					
    					</td>
    					<td align="left" style="padding-right: 15px">
    					
    					
    					
    								
    					
    						
    						<h:inputText readonly="true"  value="#{B3232_Canlamsanphongkham.cls}"  id="__cls" name="__cls" style=" width : 100px;" styleClass="myreadonlyso"><f:converter converterId="com.iesvn.yte.converter.LongDoubleConverter" /></h:inputText>
    						
    						<h:outputText value="Thuốc, VTTH" styleClass="mytext" style="margin-right: 5px; margin-left: 6px;"/>
    						<h:inputText   readonly="true"  value="#{B3232_Canlamsanphongkham.thuoc}"  tabindex="16" id="__thuocvtth" name="__thuocvtth" style=" width : 100px;" styleClass="myreadonlyso"><f:converter converterId="com.iesvn.yte.converter.LongDoubleConverter" /></h:inputText>
    							
    						
    						<h:outputText value="Thất thu" styleClass="mytext" style="margin-right: 5px; margin-left: 7px;"/>
    						<h:inputText  value="#{B3232_Canlamsanphongkham.thatthu}" onkeypress="iesvn_InputInKeys('1234567890');" tabindex="16" id="__thatthu" name="_thatthu" style=" width : 100px;" styleClass="myinputso" onchange="checkValidValue(this);" maxlength="7"><f:converter converterId="com.iesvn.yte.converter.LongDoubleConverter" /></h:inputText>
    						<h:outputText value="Miễn giảm" styleClass="mytext" style="margin-right: 5px; margin-left: 25px;"/>
    						    						
    						<h:inputText  value="#{B3232_Canlamsanphongkham.miengiam}" onkeypress="iesvn_InputInKeys('1234567890');" tabindex="17" id="__miengiam" name="_miengiam" style=" width : 100px;" styleClass="myinputso"  onchange="checkValidValue(this);" maxlength="7"><f:converter converterId="com.iesvn.yte.converter.LongDoubleConverter" /></h:inputText>
    					
    					</td>
    					
    				</tr>
    				<tr>
    					<td align="right" >
    					
    						<h:outputText  value="Ký hiệu" styleClass="mytext" style="margin-right: 5px; margin-left: 39px;"/>
    					
    					</td>
    					<td align="left" style="padding-right: 15px">
    							
    					
    							
    					<h:inputText    tabindex="17"   value="#{B3232_Canlamsanphongkham.kyhieu}" maxlength="8" id="__kyhieu"  name="_kyhieu" style="width: 100px;" styleClass="myinput"/>
    					
    					<h:outputText value="Quyển" styleClass="mytext" style="margin-right: 5px; margin-left: 41px;"/>
    					<h:inputText   tabindex="18" value="#{B3232_Canlamsanphongkham.quyen}" maxlength="8" id="__quyen"  name="_quyen" style="width: 100px;" styleClass="myinput"/>
    					
    					<h:outputText value="Biên lai" styleClass="mytext" style="margin-right: 5px; margin-left: 10px;"/>
    					<h:inputText   tabindex="19"  value="#{B3232_Canlamsanphongkham.bienlai}" maxlength="8" id="__bienlai"  name="_bienlai" style="width: 100px;" styleClass="myinput"/>
    						
    					</td>
    					
    				</tr>
    				
    				<tr style="height: 25px;">
    					<td colspan="2" align="center" style="padding-left: 250px; padding-top: 10px;">  
    						 
    						 
    						<div style="float: left;"  id="__divGhiNhan">
    							
    								<a4j:commandButton tabindex="20" 
    								
    								id="__ghinhan" name="_ghinhan" action="#{B3232_Canlamsanphongkham.ghinhan}" 
    								oncomplete="onCompleteGetInfor();highlightOnFocus();changeCursorDefault(); this.alt = 0;" 
    								
    								reRender="DT_DM_NHAN_VIEN__1,__thuocvtth,__cls,__tendoituong,__tenbankham,__kyhieu,__quyen,__bienlai,__maphieu,dataTable_NHAPCT,__listClsPK,listKetqua,DT_DM_NHAN_VIEN_MA_1,message_infor,__matiepdon,__hoten,__ngaysinh,__gioitinh,TINH_MA,HUYEN_MA,XA_MA,__madoituong,__sonha,__madantoc,__mabacsi,__noidungthu,__makhoa,__permiengiam,__miengiam,__thatthu,__perbhytchi,__bhytchi,__thanhtien1,__perbntra,__bntra,resultHidden,hid_ReportFinished,__tuoi" 
    								onclick="if (! onSubmitTmp()) { return false; }" 
    								value="Ghi nhận" style="width: 70px; margin-left:3px;" styleClass="mybton_b"/>
    							
    						</div>  
    						<div style="float: left;" >
    							
    								<a4j:commandButton tabindex="21" 
    								
    								id="__nhaplai" name="_nhaplai" action="#{B3232_Canlamsanphongkham.nhaplai}" 
    								oncomplete="onCompleteGetInfor();highlightOnFocus();changeCursorDefault(); this.alt = 0;" 
    								focus="__matiepdon"
    								reRender="DT_DM_NHAN_VIEN__1,DM_DAN_TOC,__thuocvtth,__cls,__donViTuoiHid,__namsinhHid,__tendoituong,__tenbankham,__kyhieu,__quyen,__bienlai,__maphieu,dataTable_NHAPCT,__listClsPK,listKetqua,DT_DM_NHAN_VIEN_MA_1,message_infor,__matiepdon,__hoten,__ngaysinh,__gioitinh,TINH_MA,HUYEN_MA,XA_MA,__madoituong,__sonha,__madantoc,__mabacsi,__noidungthu,__makhoa,__permiengiam,__miengiam,__thatthu,__perbhytchi,__bhytchi,__thanhtien1,__perbntra,__bntra,resultHidden,hid_ReportFinished,__tuoi,__gio,__bntrakn" 
    								value="Nhập mới" onclick="setCancel();" 
    								style="width: 70px; margin-left:3px;" styleClass="mybton_b"/>
    						
    						</div> 
    						<div style="float: left;" id="__divIn">
    							
    								<a4j:commandButton tabindex="22" id="__inphieu"
    								
    								name="_inphieu" action="#{B3232_Canlamsanphongkham.inphieu}" 
    								oncomplete="onCompleteGetInfor();highlightOnFocus();changeCursorDefault(); this.alt = 0;" 
    								reRender="DT_DM_NHAN_VIEN__1,__tendoituong,__tenbankham,__kyhieu,__quyen,__bienlai,__maphieu,dataTable_NHAPCT,__listClsPK,listKetqua,DT_DM_NHAN_VIEN_MA_1,message_infor,__matiepdon,__hoten,__ngaysinh,__gioitinh,TINH_MA,HUYEN_MA,XA_MA,__madoituong,__sonha,__madantoc,__mabacsi,__noidungthu,__makhoa,__permiengiam,__miengiam,__thatthu,__perbhytchi,__bhytchi,__thanhtien1,__perbntra,__bntra,resultHidden,hid_ReportFinished,__tuoi" 
    								value="In phiếu" onclick="if (! onSubmitTmp()) { return false; }" style="width: 60px; margin-left:3px;" styleClass="mybton_b"/>
    							
    						</div>  
    						<div style="float: left;" id="__divHuyphieu">
    							
    								<a4j:commandButton tabindex="23" id="__huyphieu"
    								
    								name="_huyphieu" action="#{B3232_Canlamsanphongkham.huyphieu}" 
    								oncomplete="onCompleteGetInfor();highlightOnFocus();changeCursorDefault(); this.alt = 0;" 
    								reRender="DT_DM_NHAN_VIEN__1,DM_DAN_TOC,__thuocvtth,__cls,__donViTuoiHid,__namsinhHid,__tendoituong,__tenbankham,__kyhieu,__quyen,__bienlai,__maphieu,dataTable_NHAPCT,__listClsPK,listKetqua,DT_DM_NHAN_VIEN_MA_1,message_infor,__matiepdon,__hoten,__ngaysinh,__gioitinh,TINH_MA,HUYEN_MA,XA_MA,__madoituong,__sonha,__madantoc,__mabacsi,__noidungthu,__makhoa,__permiengiam,__miengiam,__thatthu,__perbhytchi,__bhytchi,__thanhtien1,__perbntra,__bntra,resultHidden,hid_ReportFinished,__tuoi,__gio,__bntrakn" 
    								value="Hủy phiếu" onclick="if (! onSubmitTmp()) { return false; }" style="width: 65px; margin-left:3px;" styleClass="mybton_b"/>
    							
    						</div> 
    						<div  id="__divInphieuTT">
	    						
	    						<a4j:commandButton tabindex="24" id="__inphieuTT" name="_inphieuTT" 
	    							value="In phiếu thanh toán" style="width: 125px;float:left; margin-left:3px" styleClass="mybton_b"
	                       			action="#{B3232_Canlamsanphongkham.inPhieuThanhToan}"
	                       			reRender="__message"/>
	    					
    						</div>						    						    						    					
    					</td>
    				</tr>
    			</table>
    			    		
    								
    		</td>
    	</tr>	
    </table>
     <h:inputHidden id="hid_Gia" value=""/>
     <h:inputHidden id="hid_GiaBH" value=""/>
     <h:inputHidden id="hid_GiaYC" value=""/>
     <h:inputHidden id="hid_GiaMP" value=""/>
     
     <h:inputHidden id = "tenDmKyThuatHid" value="#{B3232_Canlamsanphongkham.tenCLS}" />
    						
     <h:inputHidden id="hid_ReportFinished" value="#{B3232_Canlamsanphongkham.reportFinished}"/>
     <h:inputHidden id="resultHidden" value="#{B3232_Canlamsanphongkham.resultHidden}"/>
     
    <h:inputHidden id="hid_ReportFileName" value="#{B3232_Canlamsanphongkham.reportFileNameHid}"/>
    <h:inputHidden id="disabledHuyPhieu" value="#{B3232_Canlamsanphongkham.disbledHuyPhieu}"/>
    
    								
   </h:form>
   </body>
   <script type="text/javascript">
   		
   		
	</script>
   
   <script type="text/javascript" src="#{facesContext.externalContext.requestContextPath}/resources/gears/dieutri/vienphi/B3232_Canlamsanphongkham_gears.js"></script>
   
   <iframe width="174" height="189" name="gToday:normal:agenda.js" id="gToday:normal:agenda.js" src="#{facesContext.externalContext.requestContextPath}/resources/calendar/ipopeng.htm" scrolling="no" frameborder="0" style="visibility:visible; z-index:999; position:absolute; top:-500px; left:-500px;"/>
</ui:define> 
</ui:composition>


