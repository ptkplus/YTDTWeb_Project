<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:s="http://jboss.com/products/seam/taglib"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:f="http://java.sun.com/jsf/core"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:rich="http://richfaces.org/rich"
                xmlns:a4j="https://ajax4jsf.dev.java.net/ajax"
                template="/layout/mytemplate.xhtml">




    <ui:define name="body">
        <f:loadBundle basename="com.iesvn.yte.UIResources" var="msg" />
        <script type="text/javascript">
        var bCancel = false;
        var enableEntToTab = true;
        function setEnableEntToTab(value) {
            enableEntToTab = value;
        }
        function checkMaxLength(field,maxlen) {
            if(field.value.length >= maxlen){
                field.value = field.value.substring(0,maxlen);                          }
        }
        function enterToTab(){
        if( (document.getElementById(prefix_component +"__ghinhan").alt != 1) &amp;&amp; (document.getElementById(prefix_component +"__quaylai").alt != 1) ) {
         if(window.event.keyCode == 13 &amp;&amp; enableEntToTab){
                window.event.keyCode = 9;
          }
        }
        }
        </script>

        <h:form id="_form" name="_form" onsubmit="return iesvn_ValidateForm(this)">
            <div style="width:778px; position:absolute; z-index:99"><ui:include src="/layout/mymenu_YTDT_TiepDon.xhtml" /></div>
            <table style="margin-top:20px" cellspacing="0" cellpadding="0" border="0" width="777">
                <tr>
                    <td colspan="3" height="50px">
                        <table cellspacing="0" cellpadding="0" border="0" width="100%" >
                            <tr>
                                <td height="50px" width="24%" style="padding-left: 18px; font-family: Arial; font-size: 18px; color: white; font-weight: bold;" >
                                    <h:graphicImage value="/images/white_light.gif" width="43" height="16" />
    						THĂM KHÁM
                                </td>
                                <td valign="top">
                                    <table cellspacing="0" cellpadding="0" width="100%" >
                                        <tr>
                                            <td style="font-family: Arial; font-size: 12px; color: white; text-align: right; padding-right: 15px; padding-bottom: 2px; height: 25px; border-bottom: solid 1px #97989a;" valign="bottom" >
                                                &#160;
                                            </td>
                                        </tr>
                                    </table>
                                </td>
                            </tr>
                        </table>
                    </td>
                </tr>
                <tr>
                    <td width="13px" height="12px" class="mytdl">
                    </td>
                    <td style="background-color: #c9daea;" width="965px" height="12px" >
                    </td>
                    <td width="11px" height="12px" class="mytdr">
                    </td>
                </tr>
                <tr>
                    <td colspan="3" style="background-color: #c9daea; padding-top: 0px; padding-bottom: 10px" width="100%" >
                        <!-- Main Area -->
                        <h:inputHidden id="goToThamKham" value="#{goToThamKham}"/>
                        <table cellspacing="0" cellpadding="0" border="0" width="75%" align="center" >
                            <tr>
                                <td colspan="2" align="center">
                                    <a4j:outputPanel id="__messagePanel">
                                        <h:messages id="message_infor" class ="mynull"/>
                                    </a4j:outputPanel>
                                </td>
                            </tr>
                            <tr style="height: 25px;">
                                <td  align="right" style="width:20%;" >
                                    <h:outputText value="Mã tiếp đón" styleClass="mytext" style="margin-left:0px;margin-right:5px;" />
                                </td>
                                <td  align="left" >
                                    <h:inputText value="#{B121_1_Thamkham.thamkham.tiepdonMa.tiepdonMa}"  id="__matiepdon" name="_matiendon" style=" width : 143px;" styleClass="myreadonly" readonly="true"/>
                                    <h:outputText value="Mã bệnh nhân" styleClass="mytext" style="margin-left:8px;margin-right:5px;" />
                                    <h:inputText value="#{B121_1_Thamkham.thamkham.tiepdonMa.benhnhanMa.benhnhanMa}" id="__mabenhnhan" name="_mabenhnhan"  style=" width : 143px;" styleClass="myreadonly" readonly="true"/>
                                </td>
                            </tr>
                            <tr style="height: 25px;">
                                <td align="right" >
                                    <h:outputText value="Họ tên" styleClass="mytext" style="margin-left:0px;margin-right:5px;" />
                                </td>
                                <td align="left">
                                    <h:inputText value="#{B121_1_Thamkham.thamkham.tiepdonMa.benhnhanMa.benhnhanHoten}"  id="__hoten" name="_hoten"  style=" width : 143px;" styleClass="myreadonly" readonly="true"/>
                                    <h:outputText value="Tuổi" styleClass="mytext" style="margin-left:62px; margin-right:5px;" />
                                    <h:inputText value="#{B121_1_Thamkham.benhNhan.benhnhanTuoi}"  id="__tuoi" name="_tuoi" style="width: 35px;margin-right:3px;" styleClass="myreadonly" readonly="true"/>
                                    <h:outputText value="(Năm)" id="__donViTuoi" styleClass="mytext" />
                                    <h:inputHidden id = "__donViTuoiHid" value = "#{B121_1_Thamkham.benhNhan.benhnhanDonvituoi}"/>
                                    <h:inputText readonly="true"  value="#{B121_1_Thamkham.ngaySinh}" onblur="return is_wellformed_Date(this)" type="text" id="__ngaytg" name="_ngaytg" maxlength="10" style="margin-left:3px;width : 65px;" styleClass="myreadonly"/>
                                </td>
                            </tr>
                            <tr style="height: 25px;">
                                <td align="right">
                                    <h:outputText value="Thời gian" styleClass="mytext" style="margin-left:0px;margin-right:5px;" />
                                </td>
                                <td align="left">
                                    <h:inputText   maxlength="5"  readonly="true" value="#{B121_1_Thamkham.gioThamKham}" id="GIO" name="_GIO" style="width: 35px;" styleClass="myreadonly"/>
                                    <h:outputText value="GG:pp" styleClass="mytext" style="margin-left: 3px; margin-right: 3px"/>
                                    <h:inputText value="#{B121_1_Thamkham.thoiGian}"  id="__ngaygio" name="_ngaygio" style=" width :65px;" styleClass="myreadonly" readonly="true" />
                                    <h:outputText value="Bàn khám" styleClass="mytext" style="margin-left:30px;margin-right:5px;" />
                                    <h:inputText  readonly="true" styleClass="myreadonly" value="#{B121_1_Thamkham.thamkham.thamkhamBankham.dtdmbankhamMa}"
                                                  id="DT_DM_BAN_KHAM_MA" name="DT_DM_BAN_KHAM_MA" style=" width : 50px" maxlength="10" />
                                    <span id="DT_DM_BAN_KHAM_span"/>
                                    <input readonly="true" id="DT_DM_BAN_KHAM" name="DT_DM_BAN_KHAM" class="myreadonly" style=" width :152px;"/>
                                </td>
                            </tr>
                        </table>
                    </td>
                </tr>
                <tr>
                    <td colspan="3" style="background-color: #ffffff; padding-top: 10px; padding-bottom: 10px" width="100%" >
                        <table cellspacing="0" cellpadding="0" border="0" width="75%" align="center" >
                            <tr style="height: 65px;">
                                <td align="right" valign="top" style="width:20%;padding-top:5px;" >
                                    <h:outputText value="Bệnh sử" styleClass="mytext" style="margin-right:5px;"/>
                                </td>
                                <td align="left" style="padding-left:0px;" >
                                    <h:inputTextarea id="__benhsu" name="_benhsu" rows="4" cols="1" value="#{B121_1_Thamkham.thamkham.thamkhamBenhsu}" tabindex="1" style="height: 65px; width : 443px;" styleClass="myinput" maxlength="100" onkeydown="setEnableEntToTab(false)" onblur="setEnableEntToTab(true)" onkeyup="checkMaxLength(this,1020)"></h:inputTextarea>
                                </td>
                            </tr>
                            <tr style="height: 65px;">
                                <td align="right" valign="top" style="padding-top:5px;padding-right:5px;" >
                                    <h:outputText value="Thăm khám, dấu hiệu lâm sàng" styleClass="mytext" />
                                </td>
                                <td align="left" style="padding-left:0px;" >
                                    <h:inputTextarea id="__dauhieulamsan" name="_dauhieulamsan" rows="4" cols="1" value="#{B121_1_Thamkham.thamkham.thamkhamThamkham}" tabindex="2" style="height: 65px; width : 443px;" styleClass="myinput"
                                                     onkeydown="setEnableEntToTab(false)" onblur="setEnableEntToTab(true)" onkeyup="checkMaxLength(this,1020)"></h:inputTextarea>
                                </td>
                            </tr>
                            <tr style="height: 65px;">
                                <td  align="right" valign="top" style="padding-top:5px;" >
                                    <h:outputText value="Cách xử trí" styleClass="mytext" style="margin-right:5px;"/>
                                </td>
                                <td align="left" style="padding-left:0px;" >
                                    <h:inputTextarea id="__cacxutri" name="_cacxutri" rows="4" cols="1" value="#{B121_1_Thamkham.thamkham.thamkhamXutri}" tabindex="3" style=" width : 443px; height: 65px;" styleClass="myinput" onkeydown="setEnableEntToTab(false)" onblur="setEnableEntToTab(true)" onkeyup="checkMaxLength(this,1020)"></h:inputTextarea>
                                </td>
                            </tr>

                            <tr style="height: 40px;">
                                <td colspan="2" style="padding-left: 220px">


                                    <a4j:commandButton action="#{B121_1_Thamkham.ghiNhanAjax()}" onclick="setSave();" tabindex="4" id="__ghinhan"
                                                       name="_ghinhan" value="Ghi nhận" style="width: 60px;" styleClass="mybton_b"
                                                       reRender="__benhsu,__dauhieulamsan,__cacxutri,__messagePanel"/>
                                    <h:commandButton action="#{B121_1_Thamkham.quayLai()}" tabindex="5" id="__quaylai" name="_quaylai"
                                                     type="submit" value="Quay lại" style="width: 60px; margin-left:3px" styleClass="mybton_b"/>
                                </td>
                            </tr>
                        </table>
                    </td>
                </tr>
            </table>
        </h:form>
        <script type="text/javascript" src="#{facesContext.externalContext.requestContextPath}/resources/gears/dieutri/tiepdon/B121_1_Thamkham_gears.js"></script>
        <script language="javascript">
                     var bSave = false;
                     function setSave() {
                             bSave = true;
                     }
		
                     function iesvn_InputMaxLengths(){
                             this.aa = new Array(prefix_component + "__benhsu", "<h:outputFormat value='#{msg.benhSuMaxLength}' ><f:param value='400'/></h:outputFormat>", "400",new Function ("varName", " return this[varName];"));
                             this.ab = new Array(prefix_component + "__dauhieulamsan", "<h:outputFormat value='#{msg.dauHieuCanLamSanMaxLength}' ><f:param value='400'/></h:outputFormat>", "400",new Function ("varName", " return this[varName];"));
                             this.ac = new Array(prefix_component + "__cacxutri", "<h:outputFormat value='#{msg.cacXuTriMaxLength}' ><f:param value='400'/></h:outputFormat>", "400",new Function ("varName", " return this[varName];"));
                 }
	    
                     function iesvn_ValidateForm(form) {
                             var valid = true;
                             if (bSave){
                             bSave = false;
                             valid = iesvn_ValidateMaxLength(form);
                         }
                         return valid;
                     }
        </script>
        <iframe width="174" height="189" name="gToday:normal:agenda.js" id="gToday:normal:agenda.js" src="#{facesContext.externalContext.requestContextPath}/resources/calendar/ipopeng.htm" scrolling="no" frameborder="0" style="visibility:visible; z-index:999; position:absolute; top:-500px; left:-500px;"/>

    </ui:define>
</ui:composition>


